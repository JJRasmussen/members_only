<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>Become Member</title>
</head>
<body>
    <%- include('utils/header') %>
    <% if(user.is_member) { %>
        <p>You are already a member</p>
        <form action="/member-status/remove" method="POST">
            <button type="submit">Remove your membership</button>
        </form>
        
    <% } else { %>
            <p>To become a member you must answer the riddle:</p>
        <div>
            <p>I say it once and never twice.</p>
            <p>When it's done, it's made to splice.</p>
            <p>Copy-paste feels like it's quick.</p>
            <p>But when it's done and something breaks.</p>
            <p>That's when the stakeholder wakes.</p>        
        </div>
        <div>
            <button id="hintButton">SHOW HINT</button>
            <p style="display:none" id="hint">A coding principle with a three letter capitalized acronym</p> 
        </div>
        <div>
            <button id="answerButton">SHOW ANSWER</button>
            <p style="display:none" id="answer">DRY</p>
        </div>
    <% if(!answer) { %>
        <p>Wrong answer</p>
        <p>Please try again or consider a hint</p>
    <% } %>
        <form action="/member-status/add" method="POST">
            <label for="membershipPassword">Membership Password</label>
            <input type="text" name="membershipPassword" id = membershipPassword required>
            <button type="submit">Become a member</button>
        </form>
    <% } %>
    <%- include('utils/footer') %>
    <script>
        const showText = (button, textblock) => {
            document.getElementById(button).addEventListener('click', function(){
                document.getElementById(textblock).style.display = 'block';
                this.style.display = 'none';
            });
        }
        showText("hintButton", "hint");
        showText("answerButton", "answer");
    </script>
</body>
</html>
